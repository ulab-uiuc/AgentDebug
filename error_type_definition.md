## 二、错误类型定义与分类

### 2.1 **Memory Analysis（记忆分析）**错误类型

此模块的错误主要发生在Agent **总结、检索或编码** 过去信息时。

- **over_simplification**（过度简化）
    - 定义：Agent将前N步的复杂信息过度简化，忽略了细节和关键因素，导致决策基于片面或简化的总结。/ Agent在总结前三步的过程中，遗漏了必要的关键细节或步骤，导致后续的决策和行动缺乏完整背景或关键信息。
    - 解释：这种错误侧重于总结信息时的 过度归纳，将复杂任务简化为单一、粗略的内容，导致误解或误操作。
    - 示例：Agent将多个商品的选择标准简化为“物品已找到”，忽略了价格、功能和库存等重要变量，导致在决策时仅考虑了是否找到物品，而忽视了其他关键因素。
    - Todo
- **memory_retrieval_failure (记忆检索失败)**
    - 定义 (Definition): Agent的记忆库中实际存在相关信息，但在需要时未能成功检索出来。
    - 示例 (Example):
        - 情景: Agent在步骤3时探索了厨房，观察到“You see a knife on the countertop.”。
        - 错误记忆: 在步骤10，任务要求切开物体时，Agent未能回忆起台面上有刀，而是开始漫无目的地在其他房间（如卧室、卫生间）寻找刀具。
- **hallucination**（虚假记忆）：Agent “回忆”起从未发生过的事件、未观察到的对象状态或未执行过的动作，并以此为依据进行推理。
    - 定义：Agent在缺乏确凿记忆的情况下，自动填补缺失的部分，生成虚假的记忆信息。
    - 示例：在需要刀具时，Agent的记忆模块生成了“我记得在第一个抽屉里看到了一把刀”，尽管open drawer 1这个动作从未成功执行过。

### 2.2 Reflection（反思模块）错误类型

此模块的错误核心在于 **错误地评估** 过去的行动和当前的状态。

- **progress_misjudge**（进度误判）
    - 定义：Agent错误地评估了自身在完成整个任务目标上的进展。这可能表现为过于乐观或过于悲观。
    - 示例：
        - 过于乐观: 任务是“找到一个杯子并把它装满水”。Agent刚走进厨房，还没找到杯子，就反思“进展顺利，任务即将完成”。
        - 过于悲观: Agent已经成功将杯子装满水，只差最后一步“把它放到微波炉上”，但Agent反思“遇到巨大困难，没有进展”，然后放弃了当前正确的计划。
        - 没有认识到任务已经完成，（宏观）
- **outcome_misinterpretation**（结果误解）
    - 定义：Agent正确执行了某个动作，但错误地解读了该动作产生的直接结果或环境反馈。
    - 示例：将"微波炉已关闭"理解为"加热完成"，即使微波炉未按预期操作
        - 情景: Agent执行Put(Apple, Microwave)，但由于距离太远，环境返回Nothing happens.。
            
            错误反思: Agent的reflection为：“成功将苹果放入微波炉。下一步是启动它。”（而实际上苹果还在Agent手中）。
            
            更微观一点？
- **causal_misattribution (因果归因错误)**
    - 定义 (Definition): Agent正确识别了失败的现象，但将其归咎于错误的原因。
    - 解释 (Explanation): 这比浅层分析更进了一步，Agent尝试寻找原因，但找错了。这会导致后续计划朝着完全错误的方向去修正。
    - 示例 (Example):
        - 情景: Agent执行Take(Key)失败，因为钥匙在一个锁住的保险箱里。w
        - 错误反思: Agent反思道：“我拿不起这把钥匙，可能是因为我的机械臂出故障了”，而不是“钥匙在保险箱里，我需要先打开保险箱”。
- **hallucination** (认为做了没有做的行为，etc)
    - 定义 (Definition): Agent认为自己执行了某行为，但是实际上并没有发生。
    - 示例 (Example): 比如agent在第6步，把之前第一步生成的plan理解成了自己已经实现的操作

### 2.3 Plan（计划模块）错误类型

此模块的错误在于 **生成了不合理的规划**

- **constraint_ignorance**（约束忽视）
    - 定义：规划忽略任务约束条件。具体而言，Agent 在执行任务时没有考虑到资源限制（如时间、预算、空间等）或者其他相关的限制条件。
    - 示例：预算$40但选择$55商品，未考虑到时间/交互轮次限制
- **impossible_action (不可能行为)**
    - 定义：Agent规划去执行一个在当前物理或逻辑条件下根本无法完成的动作或子任务。有可能是分解问题
    - 示例：
        - 物理不可能性: Agent计划 Slice(Desk)（用刀切桌子）。
        - 逻辑/前置条件不可能性: Agent的物品栏是空的，但它计划 Put(Mug, Sink)（在没有杯子的情况下，计划去放杯子）。
- **inefficient_plan (低效规划或者重复探索)**
    - **定义 (Definition):** Agent制定的计划虽然理论上可以完成任务，但极其低效、冗长或不合逻辑。
    - **解释 (Explanation):** 这类错误不会直接导致任务失败，但会极大地浪费步数，并可能因此触发step_limit_exhaustion。
    - **示例 (Example):**
        - **任务:** "把客厅的苹果拿到厨房。"
        - **错误计划:** Agent计划先去楼上的卧室，再到卫生间，最后才下楼去厨房，而不是选择直接从客厅走到厨房。

### 2.4 Action（执行模块）错误类型

- **misalignment**（规划-行动脱节）（wrong action choice)
    - 定义：Agent生成的具体行动与当前plan模块制定的意图完全不符。
    - 示例：
        - Plan: "我已经找到刀了，下一步计划是切开苹果。"
        - Action: <action>GoTo(Bedroom 1)</action> (执行了毫不相关的移动指令)。
- **invalid_action**
    - 定义：采用不存在action
    - 示例：action不在可以选择的action列表中
- **Format_error**（action格式错误导致解析失败）
    - 定义：生成无效或格式错误的动作
    - 示例：click“商品”（正确的是click[”商品”]）
- **Parameter_error** (参数不合理或者参数选择错误）
    - 定义：参数不合理
    - 示例：search[查询词重复100次]

### 2.5 System （系统问题）

- **step_limit**（步数限制耗尽）
    - 定义：Agent执行合理但因达到系统最大步数限制而失败
    - 示例：找寻两个物品任务，第一个物品找到并放置完成，正在寻找第二个物品时达到30步限制
- **tool_execution_error** (工具内部问题）
    - 定义：Agent调用的外部工具或API返回错误、或表现出不可预测的行为。
    - 示例：可能在gaia里出现，在ALFWorld中不常见，但在更广泛的Agent应用中很关键。例如，如果Agent可以调用一个“物体识别”工具，而这个工具把苹果错识别为番茄，那么后续的失败就源于工具错误。
- **llm_limit**
    - 定义：Agent 回复限制导致的失败
    - 示例：API调用超时, max token exceeed
- **environment_error (环境错误)**
    - 定义 (Definition): 模拟环境本身出现Bug，etc, 网络问题导致其行为不符合预期规则。
    - 解释 (Explanation): 这是非Agent侧的错误。
    - 示例 (Example):
        - Agent执行了一个有效的Open(Drawer)指令，但环境发生崩溃，或者抽屉模型消失了。

### 2.6 Others （其他问题）
- 定义 (Definition): 所有剩下的没有在之前定义/讨论过的问题。
not discussed before